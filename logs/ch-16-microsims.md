# Chapter 16: Hypothesis Testing - MicroSim Generation Log

**Date:** 2026-02-07
**Generated by:** Claude Code (claude-opus-4-5-20251101)

## Summary

Successfully generated 5 MicroSims for Chapter 16: Hypothesis Testing. All MicroSims use p5.js with canvas-based controls (no DOM elements) following project guidelines.

## MicroSims Created

### 1. Test Statistic Calculator
- **Directory:** `/docs/sims/test-statistic-calculator/`
- **Files:**
  - `test-statistic-calculator.js` - Main p5.js code
  - `main.html` - HTML wrapper
  - `index.md` - Lesson plan with Sylvia's voice
  - `metadata.json` - Dublin Core metadata
- **Bloom Level:** Apply (L3)
- **Features:**
  - Input fields for sample size (n), successes (x), and hypothesized p0
  - Step-by-step calculation display
  - Normal curve visualization with z-score marker
  - Color-coded interpretation (green/yellow/orange/red)
  - Conditions checker for large counts
  - Example scenario buttons (Fair Coin, Survey, Quality)

### 2. P-Value Visualizer
- **Directory:** `/docs/sims/p-value-visualizer/`
- **Files:**
  - `p-value-visualizer.js` - Main p5.js code
  - `main.html` - HTML wrapper
  - `index.md` - Lesson plan with Sylvia's voice
  - `metadata.json` - Dublin Core metadata
- **Bloom Level:** Understand (L2)
- **Features:**
  - Interactive z-score slider and curve dragging
  - Toggle between one-sided (left/right) and two-sided tests
  - Shaded regions representing p-value areas
  - Color coding: red for p < 0.05, blue otherwise
  - Quick buttons for common critical values (1.645, 1.96, 2.576)
  - Real-time interpretation text

### 3. Hypothesis Testing Decision Flowchart
- **Directory:** `/docs/sims/hypothesis-testing-flowchart/`
- **Files:**
  - `hypothesis-testing-flowchart.js` - Main p5.js code
  - `main.html` - HTML wrapper
  - `index.md` - Lesson plan with Sylvia's voice
  - `metadata.json` - Dublin Core metadata
- **Bloom Level:** Apply (L3)
- **Features:**
  - 8-step workflow with visual flowchart
  - Color-coded node types (start, process, decision, result)
  - Step-by-step navigation (Previous/Next buttons)
  - Click-to-jump to any step
  - Dynamic path highlighting based on scenario
  - New Example button generates random scenarios
  - Info panel showing current step details

### 4. Type I and Type II Error Visualizer
- **Directory:** `/docs/sims/type-error-visualizer/`
- **Files:**
  - `type-error-visualizer.js` - Main p5.js code
  - `main.html` - HTML wrapper
  - `index.md` - Lesson plan with Sylvia's voice
  - `metadata.json` - Dublin Core metadata
- **Bloom Level:** Analyze (L4)
- **Features:**
  - Toggle between "H0 is TRUE" and "H0 is FALSE" reality states
  - Adjustable true proportion when H0 is false
  - Draw Sample and Run 100 Samples buttons
  - Cumulative error counters showing Type I, Type II, and correct rates
  - Sample size and alpha sliders
  - Color-coded outcomes (green=correct, red=Type I, orange=Type II)
  - Mini normal curve showing test statistic

### 5. Two-Proportion Z-Test Calculator
- **Directory:** `/docs/sims/two-proportion-test/`
- **Files:**
  - `two-proportion-test.js` - Main p5.js code
  - `main.html` - HTML wrapper
  - `index.md` - Lesson plan with Sylvia's voice
  - `metadata.json` - Dublin Core metadata
- **Bloom Level:** Apply (L3)
- **Features:**
  - Side-by-side input panels for both groups
  - Visual bar chart comparing proportions
  - Pooled proportion calculation
  - Step-by-step standard error and z-statistic computation
  - Test type selector (two-sided, left-tailed, right-tailed)
  - Normal curve with p-value shading
  - Automatic conclusion statement generation
  - Example scenario buttons (Teaching Study, Drug Trial, Survey)

## Chapter Updates

Updated `/docs/chapters/16-hypothesis-testing/index.md`:
- Replaced 5 `<details>` blocks containing diagram specifications with iframe embeds
- Each iframe uses consistent styling: `border: 2px solid #2E7D32; border-radius: 8px;`
- Heights matched to canvas heights plus padding

## Navigation Updates

### mkdocs.yml
Added 5 new entries alphabetically:
- `Hypothesis Testing Flowchart: sims/hypothesis-testing-flowchart/index.md`
- `P-Value Visualizer: sims/p-value-visualizer/index.md`
- `Test Statistic Calculator: sims/test-statistic-calculator/index.md`
- `Two-Proportion Z-Test: sims/two-proportion-test/index.md`
- `Type Error Visualizer: sims/type-error-visualizer/index.md`

### docs/sims/index.md
Added 5 new MicroSim entries with descriptions and placeholder image references in alphabetical order.

## Implementation Notes

### Canvas-Based Controls
All MicroSims follow the project requirement to use canvas-based controls only:
- Buttons drawn with `rect()` and `text()`
- Sliders drawn with track rectangles and handle ellipses
- Input fields simulated with rectangles and keyboard capture
- Radio buttons drawn with circles
- All interaction handled via `mousePressed()`, `mouseDragged()`, `keyPressed()`

### Responsive Design
All MicroSims implement `updateCanvasSize()` as the first step in `setup()`:
```javascript
function updateCanvasSize() {
    const container = document.querySelector('main').getBoundingClientRect();
    containerWidth = Math.floor(container.width);
    canvasWidth = containerWidth;
}
```

### Sylvia Theme Colors
All MicroSims use the consistent Sylvia color palette:
```javascript
let sylviaGreen = '#2E7D32';
let sylviaGreenLight = '#4CAF50';
let sylviaAuburn = '#B5651D';
let sylviaCream = '#FFF8E1';
```

### Normal CDF Implementation
Four of the five MicroSims required normal distribution calculations. A consistent approximation function was used:
```javascript
function normalCDF(z) {
    let a1 = 0.254829592, a2 = -0.284496736, a3 = 1.421413741;
    let a4 = -1.453152027, a5 = 1.061405429, p = 0.3275911;
    let sign = z < 0 ? -1 : 1;
    z = Math.abs(z) / Math.sqrt(2);
    let t = 1.0 / (1.0 + p * z);
    let y = 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*Math.exp(-z*z);
    return 0.5 * (1.0 + sign * y);
}
```

## File Counts

- New JavaScript files: 5
- New HTML files: 5
- New Markdown files: 5
- New JSON files: 5
- Modified Markdown files: 2 (chapter + sims index)
- Modified YAML files: 1 (mkdocs.yml)

**Total new files:** 20
**Total modified files:** 3

## Testing Recommendations

1. Verify all 5 MicroSims load correctly in browser
2. Test responsive behavior by resizing window
3. Verify keyboard input works for editable fields
4. Test all interactive controls (sliders, buttons, toggles)
5. Verify p-value calculations match expected values
6. Test that example scenario buttons load correct data
7. Verify iframe embeds display correctly in chapter

## Future Improvements

Potential enhancements for these MicroSims:
- Add screenshot images for the sims/index.md entries
- Add touch event handlers for mobile devices
- Add accessibility labels (ARIA) for screen readers
- Add animation for state transitions
- Add data export functionality for results
